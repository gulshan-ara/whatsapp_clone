{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport View from \"react-native-web/dist/exports/View\";\nimport React, { useState } from \"react\";\nimport { FontAwesome } from \"@expo/vector-icons\";\nimport userImage from \"../assets/images/userImage.jpeg\";\nimport colors from \"../constants/colors\";\nimport { launchImagePicker, uploadImageAsynce } from \"../utils/imagePickerHelper\";\nimport { updateSignedInUserDate } from \"../utils/actions/authActions\";\nimport { updateLoggedInUserData } from \"../store/authSlice\";\nimport { useDispatch } from \"react-redux\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar ProfileImage = function ProfileImage(_ref) {\n  var size = _ref.size,\n    uri = _ref.uri,\n    user_Id = _ref.user_Id;\n  var dispatch = useDispatch();\n  var source = uri ? {\n    uri: uri\n  } : userImage;\n  var _useState = useState(source),\n    _useState2 = _slicedToArray(_useState, 2),\n    image = _useState2[0],\n    setImage = _useState2[1];\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    isLoading = _useState4[0],\n    setIsLoading = _useState4[1];\n  var userId = user_Id;\n  var pickImage = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      try {\n        var tempUri = yield launchImagePicker();\n        if (!tempUri) {\n          return;\n        }\n        setIsLoading(true);\n        var uploadedUri = yield uploadImageAsynce(tempUri);\n        setIsLoading(false);\n        if (!uploadedUri) {\n          throw new Error(\"Could not upload image\");\n        }\n        var newData = {\n          profilePicture: uploadedUri\n        };\n        yield updateSignedInUserDate(userId, newData);\n        dispatch(updateLoggedInUserData({\n          newData: newData\n        }));\n        setImage({\n          uri: uploadedUri\n        });\n      } catch (error) {\n        console.log(error);\n        setIsLoading(false);\n      }\n    });\n    return function pickImage() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  return _jsxs(TouchableOpacity, {\n    onPress: pickImage,\n    children: [isLoading ? _jsx(View, {\n      height: size,\n      width: size,\n      children: _jsx(ActivityIndicator, {\n        size: 'small',\n        color: colors.primary,\n        style: styles.loadingIndicator\n      })\n    }) : _jsx(Image, {\n      source: image,\n      style: _objectSpread(_objectSpread({}, styles.image), {}, {\n        width: size,\n        height: size\n      })\n    }), _jsx(View, {\n      style: styles.editIconImg,\n      children: _jsx(FontAwesome, {\n        name: \"pencil\",\n        size: 15,\n        color: \"black\"\n      })\n    })]\n  });\n};\nexport default ProfileImage;\nvar styles = StyleSheet.create({\n  image: {\n    borderRadius: 50,\n    borderColor: colors.grey,\n    borderWidth: 1\n  },\n  editIconImg: {\n    position: \"absolute\",\n    bottom: 0,\n    right: 0,\n    backgroundColor: colors.lightgrey,\n    borderRadius: 20,\n    padding: 5\n  },\n  loadingIndicator: {\n    justifyContent: \"center\",\n    alignItems: \"center\"\n  }\n});","map":{"version":3,"names":["React","useState","FontAwesome","userImage","colors","launchImagePicker","uploadImageAsynce","updateSignedInUserDate","updateLoggedInUserData","useDispatch","jsx","_jsx","jsxs","_jsxs","ProfileImage","_ref","size","uri","user_Id","dispatch","source","_useState","_useState2","_slicedToArray","image","setImage","_useState3","_useState4","isLoading","setIsLoading","userId","pickImage","_ref2","_asyncToGenerator","tempUri","uploadedUri","Error","newData","profilePicture","error","console","log","apply","arguments","TouchableOpacity","onPress","children","View","height","width","ActivityIndicator","color","primary","style","styles","loadingIndicator","Image","_objectSpread","editIconImg","name","StyleSheet","create","borderRadius","borderColor","grey","borderWidth","position","bottom","right","backgroundColor","lightgrey","padding","justifyContent","alignItems"],"sources":["/Users/gulshan/Documents/React_native_dev/whatsapp_clone/components/ProfileImage.js"],"sourcesContent":["import {\n\tActivityIndicator,\n\tImage,\n\tStyleSheet,\n\tText,\n\tTouchableOpacity,\n\tView,\n} from \"react-native\";\nimport React, { useState } from \"react\";\nimport { FontAwesome } from \"@expo/vector-icons\";\n\nimport userImage from \"../assets/images/userImage.jpeg\";\nimport colors from \"../constants/colors\";\nimport {\n\tlaunchImagePicker,\n\tuploadImageAsynce,\n} from \"../utils/imagePickerHelper\";\nimport { updateSignedInUserDate } from \"../utils/actions/authActions\";\nimport { updateLoggedInUserData } from \"../store/authSlice\";\nimport { useDispatch } from \"react-redux\";\n\nconst ProfileImage = ({ size, uri, user_Id }) => {\n\tconst dispatch = useDispatch();\n\tconst source = uri ? { uri: uri } : userImage;\n\tconst [image, setImage] = useState(source);\n\tconst [isLoading, setIsLoading] = useState(false);\n\tconst userId = user_Id;\n\n\tconst pickImage = async () => {\n\t\ttry {\n\t\t\tconst tempUri = await launchImagePicker();\n\n\t\t\tif (!tempUri) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tsetIsLoading(true);\n\t\t\t// upload image to firebase storage\n\t\t\tconst uploadedUri = await uploadImageAsynce(tempUri);\n\t\t\tsetIsLoading(false);\n\n\t\t\tif (!uploadedUri) {\n\t\t\t\tthrow new Error(\"Could not upload image\");\n\t\t\t}\n\n\t\t\tconst newData = {\n\t\t\t\tprofilePicture: uploadedUri,\n\t\t\t};\n\t\t\t// add profile picture to users database info\n\t\t\tawait updateSignedInUserDate(userId, newData);\n\n\t\t\t// updating global states of redux\n\t\t\tdispatch(updateLoggedInUserData({ newData: newData }));\n\n\t\t\t// upload the selected image to local device\n\t\t\tsetImage({ uri: uploadedUri });\n\t\t} catch (error) {\n\t\t\tconsole.log(error);\n\t\t\tsetIsLoading(false);\n\t\t}\n\t};\n\n\treturn (\n\t\t<TouchableOpacity onPress={pickImage}>\n\t\t\t{isLoading ? (\n\t\t\t\t<View height={size} width={size}>\n\t\t\t\t\t<ActivityIndicator\n\t\t\t\t\t\tsize={'small'}\n\t\t\t\t\t\tcolor={colors.primary}\n\t\t\t\t\t\tstyle={styles.loadingIndicator}\n\t\t\t\t\t/>\n\t\t\t\t</View>\n\t\t\t) : (\n\t\t\t\t<Image\n\t\t\t\t\tsource={image}\n\t\t\t\t\tstyle={{ ...styles.image, width: size, height: size }}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t<View style={styles.editIconImg}>\n\t\t\t\t<FontAwesome name=\"pencil\" size={15} color=\"black\" />\n\t\t\t</View>\n\t\t</TouchableOpacity>\n\t);\n};\n\nexport default ProfileImage;\n\nconst styles = StyleSheet.create({\n\timage: {\n\t\tborderRadius: 50,\n\t\tborderColor: colors.grey,\n\t\tborderWidth: 1,\n\t},\n\teditIconImg: {\n\t\tposition: \"absolute\",\n\t\tbottom: 0,\n\t\tright: 0,\n\t\tbackgroundColor: colors.lightgrey,\n\t\tborderRadius: 20,\n\t\tpadding: 5,\n\t},\n\tloadingIndicator: {\n\t\tjustifyContent: \"center\",\n\t\talignItems: \"center\",\n\t},\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}