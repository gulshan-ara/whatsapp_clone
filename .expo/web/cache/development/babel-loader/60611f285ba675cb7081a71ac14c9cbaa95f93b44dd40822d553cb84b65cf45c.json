{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport React, { useCallback, useReducer, useEffect, useState } from \"react\";\nimport { Feather } from \"@expo/vector-icons\";\nimport Input from \"../components/Input\";\nimport SubmitButton from \"../components/SubmitButton\";\nimport { validateInput } from \"../utils/actions/formActions\";\nimport { reducer } from \"../utils/reducers/formReducer\";\nimport { signIn } from \"../utils/actions/authActions\";\nimport { useDispatch } from \"react-redux\";\nimport colors from \"../constants/colors\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar initialState = {\n  inputValues: {\n    email: \"\",\n    password: \"\"\n  },\n  inputValidities: {\n    email: false,\n    password: false\n  },\n  formIsValid: false\n};\nvar SignInForm = function SignInForm() {\n  var dispatch = useDispatch();\n  var _useState = useState(),\n    _useState2 = _slicedToArray(_useState, 2),\n    error = _useState2[0],\n    setError = _useState2[1];\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    isLoading = _useState4[0],\n    setIsLoading = _useState4[1];\n  var _useReducer = useReducer(reducer, initialState),\n    _useReducer2 = _slicedToArray(_useReducer, 2),\n    formState = _useReducer2[0],\n    dispatchFormState = _useReducer2[1];\n  var inputChangeHandler = useCallback(function (inputId, inputValue) {\n    var result = validateInput(inputId, inputValue);\n    dispatchFormState({\n      inputId: inputId,\n      validationResult: result,\n      inputValue: inputValue\n    });\n  }, [dispatchFormState]);\n  useEffect(function () {\n    if (error) {\n      Alert.alert(\"Error : \", error);\n    }\n  }, [error]);\n  var authHandler = useCallback(_asyncToGenerator(function* () {\n    try {\n      setIsLoading(true);\n      var action = signIn(formState.inputValues.email, formState.inputValues.password);\n      setError(null);\n      yield dispatch(action);\n    } catch (error) {\n      console.log(error.message);\n      setError(error.message);\n      setIsLoading(false);\n    }\n  }), [dispatch, formState]);\n  return _jsxs(_Fragment, {\n    children: [_jsx(Input, {\n      id: \"email\",\n      label: \"Email\",\n      icon: \"mail\",\n      iconPack: Feather,\n      iconSize: 24,\n      autoCapitalize: \"none\",\n      keyboardType: \"email-address\",\n      onInputChanged: inputChangeHandler,\n      initialValue: formState.inputValues.email,\n      errorText: formState.inputValidities[\"email\"]\n    }), _jsx(Input, {\n      id: \"password\",\n      label: \"Password\",\n      icon: \"lock\",\n      iconPack: Feather,\n      iconSize: 24,\n      autoCapitalize: \"none\",\n      secureTextEntry: true,\n      onInputChanged: inputChangeHandler,\n      initialValue: formState.inputValues.password,\n      errorText: formState.inputValidities[\"password\"]\n    }), isLoading ? _jsx(ActivityIndicator, {\n      size: \"small\",\n      color: colors.primary,\n      style: {\n        marginTop: 10\n      }\n    }) : _jsx(SubmitButton, {\n      title: \"Sign In\",\n      onPress: authHandler,\n      style: {\n        marginTop: 20\n      },\n      disabled: !formState.formIsValid\n    })]\n  });\n};\nexport default SignInForm;","map":{"version":3,"names":["React","useCallback","useReducer","useEffect","useState","Feather","Input","SubmitButton","validateInput","reducer","signIn","useDispatch","colors","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","initialState","inputValues","email","password","inputValidities","formIsValid","SignInForm","dispatch","_useState","_useState2","_slicedToArray","error","setError","_useState3","_useState4","isLoading","setIsLoading","_useReducer","_useReducer2","formState","dispatchFormState","inputChangeHandler","inputId","inputValue","result","validationResult","Alert","alert","authHandler","_asyncToGenerator","action","console","log","message","children","id","label","icon","iconPack","iconSize","autoCapitalize","keyboardType","onInputChanged","initialValue","errorText","secureTextEntry","ActivityIndicator","size","color","primary","style","marginTop","title","onPress","disabled"],"sources":["/Users/gulshan/Documents/React_native_dev/whatsapp_clone/components/SignInForm.js"],"sourcesContent":["import { ActivityIndicator, Alert } from \"react-native\";\nimport React, { useCallback, useReducer, useEffect, useState } from \"react\";\nimport { Feather } from \"@expo/vector-icons\";\nimport Input from \"../components/Input\";\nimport SubmitButton from \"../components/SubmitButton\";\nimport { validateInput } from \"../utils/actions/formActions\";\nimport { reducer } from \"../utils/reducers/formReducer\";\nimport { signIn } from \"../utils/actions/authActions\";\nimport { useDispatch } from \"react-redux\";\nimport colors from \"../constants/colors\";\n\nconst initialState = {\n\tinputValues: {\n\t\temail: \"\",\n\t\tpassword: \"\",\n\t},\n\tinputValidities: {\n\t\temail: false,\n\t\tpassword: false,\n\t},\n\tformIsValid: false,\n};\n\nconst SignInForm = () => {\n\tconst dispatch = useDispatch();\n\n\t// state handler for error messages\n\tconst [error, setError] = useState();\n\tconst [isLoading, setIsLoading] = useState(false);\n\tconst [formState, dispatchFormState] = useReducer(reducer, initialState);\n\n\tconst inputChangeHandler = useCallback(\n\t\t(inputId, inputValue) => {\n\t\t\tconst result = validateInput(inputId, inputValue);\n\t\t\tdispatchFormState({\n\t\t\t\tinputId,\n\t\t\t\tvalidationResult: result,\n\t\t\t\tinputValue,\n\t\t\t});\n\t\t},\n\t\t[dispatchFormState]\n\t);\n\n\t// useEffect hook for rendering alert if error occurs\n\tuseEffect(() => {\n\t\tif (error) {\n\t\t\tAlert.alert(\"Error : \", error);\n\t\t}\n\t}, [error]);\n\n\t// authentication handler\n\tconst authHandler = useCallback(async () => {\n\t\ttry {\n\t\t\tsetIsLoading(true);\n\t\t\t// sign up authentication code\n\t\t\tconst action = signIn(\n\t\t\t\tformState.inputValues.email,\n\t\t\t\tformState.inputValues.password\n\t\t\t);\n\n\t\t\t// setting error to null because it's a successful signup\n\t\t\tsetError(null);\n\t\t\tawait dispatch(action);\n\t\t} catch (error) {\n\t\t\tconsole.log(error.message);\n\t\t\t// updating error state because it's a unsuccessful sign up\n\t\t\tsetError(error.message);\n\t\t\tsetIsLoading(false);\n\t\t}\n\t}, [dispatch, formState]);\n\n\treturn (\n\t\t<>\n\t\t\t<Input\n\t\t\t\tid=\"email\"\n\t\t\t\tlabel=\"Email\"\n\t\t\t\ticon=\"mail\"\n\t\t\t\ticonPack={Feather}\n\t\t\t\ticonSize={24}\n\t\t\t\tautoCapitalize=\"none\"\n\t\t\t\tkeyboardType=\"email-address\"\n\t\t\t\tonInputChanged={inputChangeHandler}\n\t\t\t\tinitialValue={formState.inputValues.email}\n\t\t\t\terrorText={formState.inputValidities[\"email\"]}\n\t\t\t/>\n\t\t\t<Input\n\t\t\t\tid=\"password\"\n\t\t\t\tlabel=\"Password\"\n\t\t\t\ticon=\"lock\"\n\t\t\t\ticonPack={Feather}\n\t\t\t\ticonSize={24}\n\t\t\t\tautoCapitalize=\"none\"\n\t\t\t\tsecureTextEntry\n\t\t\t\tonInputChanged={inputChangeHandler}\n\t\t\t\tinitialValue={formState.inputValues.password}\n\t\t\t\terrorText={formState.inputValidities[\"password\"]}\n\t\t\t/>\n\t\t\t{isLoading ? (\n\t\t\t\t<ActivityIndicator\n\t\t\t\t\tsize={\"small\"}\n\t\t\t\t\tcolor={colors.primary}\n\t\t\t\t\tstyle={{ marginTop: 10 }}\n\t\t\t\t/>\n\t\t\t) : (\n\t\t\t\t<SubmitButton\n\t\t\t\t\ttitle=\"Sign In\"\n\t\t\t\t\tonPress={authHandler}\n\t\t\t\t\tstyle={{ marginTop: 20 }}\n\t\t\t\t\tdisabled={!formState.formIsValid}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</>\n\t);\n};\n\nexport default SignInForm;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}